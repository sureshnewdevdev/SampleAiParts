<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Authentication & Access Controls</title>
<style>
body {margin:0;font-family:Arial, sans-serif;}
.topnav {background-color:#04AA6D;overflow:hidden;color:white;padding:14px;font-size:20px;font-weight:bold;}
.sidebar {height:100vh;width:260px;position:fixed;top:48px;left:0;background:#f1f1f1;padding-top:20px;overflow-y:auto;border-right:1px solid #ddd;}
.sidebar a {padding:10px 20px;display:block;color:#000;text-decoration:none;font-weight:600;}
.sidebar a:hover {background:#ddd;}
.main {margin-left:270px;padding:20px;}
.section {border:1px solid #ddd;margin-bottom:20px;}
.section h2 {margin:0;padding:10px;background:#04AA6D;color:white;}
.section .content {padding:15px;}
.note {border-left:4px solid #2196F3;background:#E7F3FE;padding:10px;margin:10px 0;}
.tip {border-left:4px solid #04AA6D;background:#e8f5e9;padding:10px;margin:10px 0;}
.warning {border-left:4px solid #f44336;background:#ffebee;padding:10px;margin:10px 0;}
.example {background:#f5f5f5;border-left:4px solid #999;padding:10px;margin:10px 0;}
.code {background:#1e1e1e;color:#f8f8f2;padding:10px;border-radius:4px;overflow:auto;font-family:Consolas, monospace;}
.try-btn {background:#04AA6D;color:white;padding:8px 12px;border:none;border-radius:4px;text-decoration:none;display:inline-block;margin-top:8px;}
.nav-btn {background:#04AA6D;color:white;padding:10px 16px;border:none;border-radius:4px;text-decoration:none;display:inline-block;margin:10px 5px;}
img {max-width:100%;height:auto;border:1px solid #ddd;border-radius:4px;margin:10px 0;}
pre {white-space:pre-wrap;}
</style>
</head>
<body>
<div class="topnav">Azure OpenAI Service – Architecture, Deployment, Security & Integration</div>
<div class="sidebar">
<a href="index.html">Introduction</a>
<a href="azure-openai-architecture.html">Architecture & Capabilities</a>
<a href="azure-openai-setup.html">Setup</a>
<a href="azure-openai-deployment.html">Deployment & Management</a>
<a href="azure-openai-auth.html">Authentication & Access</a>
<a href="azure-openai-api-patterns.html">API Integration Patterns</a>
<a href="azure-openai-integrations.html">Integrations with Azure Services</a>
<a href="azure-openai-rag.html">RAG Workflow</a>
<a href="azure-openai-best-practices.html">Best Practices</a>
<a href="azure-openai-use-cases.html">Real-world Use Cases</a>
<a href="azure-openai-mini-project.html">Mini Project</a>
<a href="azure-openai-faqs.html">FAQs</a>
<a href="azure-openai-interview.html">Interview Questions</a>
<a href="azure-openai-summary.html">Summary</a>
<a href="azure-openai-quiz.html">MCQ Quiz</a>
<a href="azure-openai-downloads.html">Downloads</a>
</div>
<div class="main">
<div class="section">
<h2>Authentication & Access Controls</h2>
<div class="content">
<p>Azure OpenAI supports two primary authentication models: API keys and Azure AD (Entra ID) tokens. API keys provide simple header-based auth suited for service-to-service calls, while Azure AD grants conditional access, managed identities, and RBAC assignment. Role assignments like Cognitive Services OpenAI User restrict who can invoke deployments.</p>
<p>Network security complements identity by limiting ingress through IP allowlists, private endpoints, or VNet integration. Combine these with Azure Policy to block public access and enforce logging. Key rotation and token lifetime policies keep credentials fresh and audit-friendly.</p>
<p>Centralizing secrets in Azure Key Vault, coupled with managed identities for apps, removes hardcoded keys. For cross-tenant scenarios, service principals can be granted specific roles with least privilege.</p>
<img src="https://via.placeholder.com/900x350?text=Security+Flow" alt="Security Flow" />
</div>
</div>
<div class="section">
<h2>ASCII Auth Flow</h2>
<div class="content">
<pre>Client --> Auth (Key or AAD) --> API Management --> Azure OpenAI
           |                      |--> RBAC check
           |--> Key Vault         |--> Private Endpoint / Firewall</pre>
</div>
</div>
<div class="section">
<h2>Example Scenario</h2>
<div class="content">
<div class="example"><strong>Example:</strong> A healthcare API uses managed identity from Azure App Service to obtain a token, restricts access via private endpoint, and enforces RBAC so only the backend service can call the deployment.</div>
</div>
</div>
<div class="section">
<h2>Auth Code Sample</h2>
<div class="content">
<div class="code"><pre># Python: acquire AAD token and call Azure OpenAI
from azure.identity import DefaultAzureCredential
from azure.core.credentials import AzureKeyCredential
import requests, os

endpoint = "https://clinic-openai.openai.azure.com"
deployment = "gpt-4o-prod"
credential = DefaultAzureCredential()
token = credential.get_token("https://cognitiveservices.azure.com/.default")
headers = {
  "Content-Type": "application/json",
  "api-key": os.getenv("AZURE_OPENAI_KEY"),
  "Authorization": f"Bearer {token.token}"
}
payload = {"messages":[{"role":"user","content":"Hello"}]}
resp = requests.post(f"{endpoint}/openai/deployments/{deployment}/chat/completions?api-version=2024-02-15-preview",
                     headers=headers,json=payload)
print(resp.json())</pre></div>
<a class="try-btn" href="#">Try It Yourself</a>
</div>
</div>
<div class="section">
<h2>Real-world Use Case</h2>
<div class="content">
<p>Financial institutions often enforce Azure AD-only authentication with private endpoints and Conditional Access, ensuring only managed workloads on trusted networks can issue prompts while user requests are logged for compliance.</p>
</div>
</div>
<div class="section">
<h2>Beginner Tip & Advanced Note</h2>
<div class="content">
<div class="tip"><strong>Beginner Tip:</strong> Start with API keys for initial connectivity tests, then transition to managed identities to eliminate secret storage.</div>
<div class="warning"><strong>Advanced Note:</strong> Combine role assignments with custom DLP policies and API Management validate-jwt policies to enforce audience and issuer checks on every request.</div>
</div>
</div>
<div>
<a href="azure-openai-deployment.html" class="nav-btn">← Previous</a>
<a href="azure-openai-api-patterns.html" class="nav-btn">Next →</a>
</div>
</div>
</body>
</html>
